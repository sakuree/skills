# 子表单填写助手插件

URL: https://hc.jiandaoyun.com/open/16452

## 1. 简介

### 1.1 插件简介

子表单填写助手插件包含了以下两个函数：

* 子表单自动添加行，能够实现当在表单中输入行数后，子表单能够根据输入的行数自动添加相应的子表单行数。减少了用户逐行添加的复杂操作，提高了数据录入效率
* 拆分多选到子表单，能够实现在复选框中选择好对应的选项后，子表单能够根据选择的选项来添加对应的子表单行数，减少了用户重复录入、反复核对中出错的概率。

### 1.2 应用场景

适用于需要通过子表单来录入数据的场景。如物品入库表中，通过输入物资种类数/选择对应的物资，子表单可以自动添加对应的行数；产品管理场景中，通过输入产品系列数/选择对应的产品，子表单根据系列数/产品内容自动生成对应的行数等。

### 1.3 预期效果

以物资入库场景为例，通过输入物资种类数/选择物品，在子表单中自动添加对应的行数，效果如下所示：

![](https://help-assets.jiandaoyun.com/0aaa7f8d-4ff9-42ac-a345-a38672f18881)

### 1.4 使用说明

该插件为免费插件，付费版用户可免费使用。

## 2. 插件安装及启用

### 2.1 插件安装

1）直接安装

* 您可点击右方链接直接安装插件：[子表单填写助手插件安装](https://www.jiandaoyun.com/open/store/plugin?plugin_id=63b41481a5cfc51b66d2a476)。
* 安装成功后，可参考本文【2.2 启用插件】，前往「开放平台 >> [插件管理](https://hc.jiandaoyun.com/open/12278)」处配置并启用插件。

2）插件市场安装

在简道云「插件市场」处，安装「子表单填写助手」插件。插件市场处安装方法可参见文档：[插件市场中【2.3 插件安装】](https://hc.jiandaoyun.com/open/13150)。

![](https://help-assets.jiandaoyun.com/05e66e17-b639-45bd-926f-d0d5ad4bd41d)

### 2.2 插件启用

在插件管理中，打开「子表单填写助手」插件右侧开关，启用插件。

![](https://help-assets.jiandaoyun.com/28eaca2d-631a-4d1b-b1a5-d01ee9ea2299)

## 3. 表单搭建

插件体验可先点击：[子表单填写助手插件模板表单](https://u5frp3z78u.jiandaoyun.com/f/63b4e68353a4d6000aaaedb3)。本文将按照示例表单进行讲解。

以物资入库信息填写为例，新建「物资入库表」表单，字段设置如下：

|  |  |  |
| --- | --- | --- |
| **字段说明** | **字段名称** | **字段类型** |
| 物资种类 | 责任行政 | 部门单选 |
| 物资种类数 | 数字 |
| 物资明细表 | 子表单 |
| 序号 | 单行文本 |
| 物资名称 |
| 单价 |
| 数量 | 数字 |
| 物资选择 | 物资名称 | 复选框 |
| 物资选择表 | 子表单 |
| 物资名称 | 单行文本 |
| 单价 |
| 数量 | 数字 |

![](https://help-assets.jiandaoyun.com/b94c727e-fb26-460e-a345-03b5cb948c65)

## 4. 前端事件配置

### 4.1 子表单自动添加行

#### 4.1.1 添加前端事件

进入「表单属性」，点击前端事件下的「设置」，添加前端事件：

![](https://help-assets.jiandaoyun.com/b0e442a8-7759-43ed-9068-58fb35aa8492)

#### 4.1.2 设置事件名称和说明

添加好前端事件后，首先设置前端事件的基础信息，即事件名称和说明，用于区分前端事件：

![](https://help-assets.jiandaoyun.com/fab63c60-0d18-453c-b282-b5fa4d2e4d20)

#### 4.1.3 设置触发动作

设置触发动作：由于需要根据物资种类数，来添加对应的子表单行数，故触发字段选择「物资种类数」字段。

![](https://help-assets.jiandaoyun.com/677a1ce1-096f-44d9-88d7-848deb6cbb35)

#### 4.1.4 设置执行动作

1）设置执行动作如下所示：

* 选择插件：选择「子表单自动添加行」插件；
* 添加的行数：设置为字段值，即「物资种类数」；

![](https://help-assets.jiandaoyun.com/60a0d2f4-9580-4128-b11c-dd641274ba7a)

2）在「字段存储关系」处，点击「添加」按钮，选择「子表单.序号」字段，设置子表单.序号回填到「物资明细表.序号」字段中。如下所示：

![](https://help-assets.jiandaoyun.com/f851e2f7-3317-4e97-9991-520260a5cef0)

注：如不需要插件生成的序号字段，可在表单中设置该字段为不可见字段。

3）在「如何填充到当前表」处，选择「先清空子表单再填充」字段，设置完成后点击「保存」。如下所示：

![](https://help-assets.jiandaoyun.com/0820529e-dbf3-4248-b204-31afab8232c7)

### 4.2 拆分多选到子表单

#### 4.2.1 添加前端事件

进入「前端事件」页面，点击「添加前端事件」，添加前端事件：

![](https://help-assets.jiandaoyun.com/f1a70a1c-8eed-4395-91ed-8445eb31d169)

#### 4.2.2 设置事件名称和说明

添加好前端事件后，首先设置前端事件的基础信息，即事件名称和说明，用于区分前端事件：

![](https://help-assets.jiandaoyun.com/29257bf1-8bc1-44dc-98b4-c8bd4c1c51ad)

#### 4.2.3 设置触发动作

设置触发动作：由于需要通过选择复选框中的内容，来添加对应的子表单行数，故触发字段选择「物资名称」字段。

![](https://help-assets.jiandaoyun.com/7d559eec-2692-4535-9cdc-46c11dd2dd56)

#### 4.2.4 设置执行动作

1）设置执行动作如下所示：

* 选择插件：选择「子表单填写助手」插件，并且选择函数为「拆分多选到子表单」；
* 复选字段：设置为字段值，即「物资名称」；

![](https://help-assets.jiandaoyun.com/d8efba55-bac2-4a05-9926-41e325f097c3)

2）在「字段存储关系」处，点击「添加」按钮，选择「子表.选项名」字段，设置子表.选项名回填到「物资选择表.物资名称」字段中，设置完成后点击「保存」，如下所示：

![](https://help-assets.jiandaoyun.com/3001f127-430e-44fb-b864-d7778efac0a9)

### 4.3 效果演示

效果参见本文【1.3 预期效果】。